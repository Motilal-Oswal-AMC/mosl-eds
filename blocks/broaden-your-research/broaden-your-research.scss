@use 'sass:map';
@use '../../styles/common-theme/css/variables_mixins' as *;
@use '../../styles/common-theme/css/fluid-typography' as *;
@import '../swiper/swiper-bundle.min.css';

/* stylelint-disable */

//================================================
// Component: "Broaden Your Research" Section
// Refactored to match the provided HTML structure.
//================================================

// --- Main Section Block ---
.broaden-your-research-container {
    position: relative;
    // background: url(../../icons/broaden-research.png);
    background: url("../../icons/broaden-research.png") no-repeat center/cover;


    // &::before {
    //     content: '';
    //     position: absolute;
    //     bottom: 0;
    //     left: 0;
    //     width: 100%;
    //     height: 40%; // Height of the background bar area
    //     z-index: 0;
    //     // Using multiple gradients to create the bars without extra HTML
    //     background-image:
    //         linear-gradient(map.get($blue-1, 'b25'), map.get($blue-1, 'b25')),
    //         linear-gradient(map.get($blue-1, 'b25'), map.get($blue-1, 'b25')),
    //         linear-gradient(map.get($blue-1, 'b25'), map.get($blue-1, 'b25')),
    //         linear-gradient(map.get($blue-1, 'b25'), map.get($blue-1, 'b25')),
    //         linear-gradient(map.get($blue-1, 'b25'), map.get($blue-1, 'b25'));
    //     background-repeat: no-repeat;
    //     // Defining the [width, height] of each bar
    //     background-size:
    //         8% 40%, // Bar 1
    //         10% 70%, // Bar 2
    //         8% 30%, // Bar 3
    //         9% 85%, // Bar 4
    //         10% 55%; // Bar 5
    //     // Defining the [X-position, Y-position] of each bar (Y is 100% to align to bottom)
    //     background-position:
    //         15% 100%,
    //         30% 100%,
    //         50% 100%,
    //         70% 100%,
    //         85% 100%;
    // }
    >div:first-child {
        text-align: center;
        margin-bottom: 40px;

        p {
            text-align: center;
            @include font-style(36px, 44px, $primary-blue, map.get($font-weights, bold), $ButlerPro);

            @include media(moblie) {
                @include font-style(24px, 28px, $primary-blue, map.get($font-weights, bold), $ButlerPro);
            }
        }
    }

    >div:last-child {
        width: 100%;
        margin-top: 80px;

        .button-container {
            display: flex;
            align-items: center;
            justify-content: center;

            a {
                display: flex;
                width: 176px;
                padding: 12px;
                justify-content: center;
                align-items: center;
                gap: 8px;
                border-radius: 4px;
                background: $primary-blue;
                @include font-style(16px, 20px, $primary-white, map.get($font-weights, medium), $ButlerPro);
            }
        }
    }
}

.broaden-your-research {
    &.block {
        background-color: $primary-white;
        font-family: $Poppins;
        padding: map.get($spacing, 'xxl') map.get($spacing, 'md');
        text-align: center;
        @include flex-center(flex-end, center);
        flex-wrap: wrap;
        gap: map.get($spacing, 'lg');
        position: relative;
        padding-bottom: map.get($spacing, 'xxl');
        background: transparent;
        // background-repeat: no-repeat;
        // background-position: center;
        // background-size: cover;
    }

    &__title {
        @include typography-h2;
        width: 100%; // Ensure it sits above the flexed cards
        margin-bottom: map.get($spacing, 'xxl');
    }

    // .swiper-wrapper {
    //     justify-content: center;
    //     align-items: flex-end;
    // }

    // --- Card Component ---
    .card-wrap {
        display: flex;
        flex-direction: column;
        padding: map.get($spacing, 'md');
        width: 100%;
        max-width: 280px;
        text-align: left;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border-radius: 8px;
        border: 0.5px solid #B9BBFF;
        background: var(--Neutrals-White, #FFF);
        box-shadow: 0px 0px 8px 0px rgba(0, 0, 0, 0.06);

        &:hover {
            transform: translateY(-8px);
        }

        // --- Top Image Section ---
        .img-wrapper {
            @include flex-center;
            border-radius: 4px;
            background: var(--Blue-1-200, #9DADFE);
            border-radius: map.get($radius, 'r12');
            height: 100px;
            margin-bottom: map.get($spacing, 'lg');

            .logoScheme {
                max-width: 60px; // Control the size of the logo inside
            }
        }

        // --- Text Details ---
        .title-subtitle {
            flex-grow: 1; // Pushes the footer down
            margin-bottom: map.get($spacing, 'md');

            p {
                @include font-style(0.8rem, 1.4, map.get($blue-1, b400), map.get($font-weights, medium), $Poppins);
                margin: 0;
            }

            .title h2 {
                @include font-style(1.15rem, 1.3, $primary-blue, map.get($font-weights, semibold), $Poppins);
                margin: map.get($spacing, 'xxs') 0 0;
            }
        }

        // --- Footer Icons ---
        .icons-card-wrap {
            ul {
                // Style the <ul> as a flex container for the icons
                @include flex-center(flex-end, space-between);
                list-style: none;
                padding: 0;
                margin: 0;
                height: 32px;
                line-height: normal;

                li {
                    height: -webkit-fill-available;
                    line-height: normal;
                }

                li:nth-child(2) {
                    padding-top: 10px;
                }
            }

            .icon {
                display: inline-block;
                width: 32px;
                height: 32px;

                // Style the external link icon to look like a button
                &.icon-external-link {
                    @include flex-center;
                    background-color: $primary-blue;
                    border-radius: map.get($radius, 'r50');
                    width: 24px;
                    height: 24px;
                    cursor: pointer;
                    transition: background-color 0.3s ease;

                    &:hover {
                        background-color: $primary-blue-dark;
                    }

                    img {
                        width: 20px;
                        height: 20px;
                    }
                }
            }
        }

        // --- Promoted Card Modifier ---
        // How to use: Add this class to your middle card's HTML
        // e.g., <div class="card-wrap card-wrap--promoted">
        &--promoted {
            transform: translateY(calc(-1 * map.get($spacing, 'xl')));

            &:hover {
                transform: translateY(calc(-1 * map.get($spacing, 'xl') - 8px));
            }
        }
    }

    // .card-wrap:nth-of-type(even) {
    //     margin-bottom: 45px;

    //     @include media (tab) {
    //         margin: 0;
    //     }
    // }
}



// --- Responsive Adjustments ---
@include media('mobile') {
    .broaden-your-research.block {
        align-items: center; // Center cards when they stack
        gap: map.get($spacing, 'xl');
    }

    .card-wrap,
    .card-wrap--promoted {
        transform: translateY(0); // Reset all transforms for a simple stacked layout
        max-width: 340px;

        &:hover {
            transform: translateY(-8px); // Uniform hover effect on mobile
        }
    }
}